@model IEnumerable<OWRM_Work_Routine_Manager.Models.NotasViewModel>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Styles.Render("~/Content/css/Notas/Index.css")
@Scripts.Render("~/Scripts/Notas/Index.js")

<div class="row">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 barra_superior">
                <div class="btn btn-primary btn_notas" data-toggle="modal" data-target="#ModalNota">+</div>
                <span>Clique no botão para criar uma nova nota</span>
            </div>
        </div>
        <div class="row">
            @if (Model.Count() == 0)
            {
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 sem_dados">
                    Não existem dados a serem exibidos :(
                </div>
            }
            else
            {
                foreach (var item in Model)
                {
                    <div class="card nota" style="width: 18rem; background-color: @item.COR">
                        <div class="card-body">
                            <span class="btn_excluir" onclick="ExcluirNota(@item.ID_NOTA)">x</span>
                            <h5 class="card-title">@item.TITULO</h5>
                            <p class="card-text">
                                @item.DESCRICAO
                            </p>
                            <div class="row card_bottom_buttons">
                                <div class="col-md-2" onclick="EditarNota(@item.ID_NOTA)" data-toggle="modal" data-target="#ModalEdicaoNota">
                                    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="edit" class="svg-inline--fa fa-edit fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"></path></svg>
                                </div>
                            </div>
                            @*<span class="data-criacao">@item.DATA.Value.ToString("dd/MM/yyyy")</span>*@
                        </div>
                    </div>
                }
            }
        </div>
    </div>

    <!-- Modal criação notas -->
    <div class="modal fade" id="ModalNota" tabindex="-1" role="dialog" aria-labelledby="ModalNota" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content adicionar">
                <div class="modal-header">
                    <h5 class="modal-title" id="TituloModalCentralizado">Escreva uma nota</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label>Insira aqui o título da sua nota<span class="ehobrigatorio">*</span></label>
                            <textarea class="form-control" id="tituloNota" rows="1"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Insira aqui a descrição da sua nota<span class="ehobrigatorio">*</span></label>
                            <textarea class="form-control" id="descricaoNota" rows="6"></textarea>
                        </div>
                    </form>

                    <div class="row col-12">
                        <label>Escolha a cor da sua nota<span class="ehobrigatorio">*</span></label>
                    </div>
                    <div class="row col-12 colors">
                        @foreach (var item in ViewBag.cores)
                        {
                            <div class="spancolor" id="@item" style="background-color: @item" onclick="selecionarCor('@item')"></div>
                        }
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-success" onclick="SalvarNota()">Salvar mudanças</button>
                        <button type="button" class="btn btn-danger" id="btnFechar" data-dismiss="modal">Fechar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal edição de notas -->
    <div class="modal fade" id="ModalEdicaoNota" tabindex="-1" role="dialog" aria-labelledby="ModalEdicaoNota" aria-hidden="true">
        <span class="edt"></span>
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content editar">
                <div class="modal-header">
                    <h5 class="modal-title" id="TituloModalCentralizado">Edite sua nota</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label>Edite aqui o título da sua nota<span class="ehobrigatorio">*</span></label>
                            <textarea class="form-control" id="tituloNotaEdt" rows="1"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Edite aqui a descrição da sua nota<span class="ehobrigatorio">*</span></label>
                            <textarea class="form-control" id="descricaoNotaEdt" rows="6"></textarea>
                        </div>
                    </form>

                    <div class="row col-12">
                        <label>Edite aqui a cor da sua nota<span class="ehobrigatorio">*</span></label>
                    </div>
                    <!--Fazer um foreach para pegar do banco-->
                    <div class="row col-12 colors">
                        @foreach (var item in ViewBag.cores)
                        {
                            <div class="spancolor" id="@item" style="background-color: @item" onclick="selecionarCor('@item')"></div>
                        }
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-success" onclick="SalvarNotaEditada()">Salvar mudanças</button>
                        <button type="button" class="btn btn-danger" id="btnFechar" data-dismiss="modal">Fechar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

